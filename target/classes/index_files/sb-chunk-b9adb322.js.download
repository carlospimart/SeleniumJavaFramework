(window.msfast_searchux_sb_jsonp=window.msfast_searchux_sb_jsonp||[]).push([["pro-sphprefileinsite"],{RkML:function(e,t,r){"use strict";var i=r("rx5T"),n=r("3zA8"),a=r("CCsL");var c=r("o2F0");var o=r("OJcW"),s=r("YjUw");var u=function(e){return!(t=e.contentTypeId)||t.substr(0,c.a.length)!==c.a&&t.substr(0,c.b.length)!==c.b?e.defaultEncodingUrl&&e.fileExtension&&(-1!==s.e.indexOf(e.fileExtension)||-1!==s.a.indexOf(e.fileExtension)||-1!==s.c.indexOf(e.fileExtension))?e.defaultEncodingUrl:null:Object(o.b)(e.videoPlayerUrlTemplate)||!function(e){return(null==e?void 0:e.substr(0,c.a.length))===c.a}(e.contentTypeId)?e.defaultEncodingUrl:Object(o.a)(e.videoPlayerUrlTemplate,e.videoChannelId,e.videoId);var t},l={getPath:function(e){if(!e)return null;var t,r=u(e);return r||(e.serverRedirectedUrl?e.serverRedirectedUrl:e.defaultEncodingUrl&&(t=e.contentClass,e.isDocument||0!==(null==t?void 0:t.toLowerCase().indexOf("sts_listitem_")))?e.defaultEncodingUrl:e.path?e.path:e.defaultEncodingUrl?e.defaultEncodingUrl:null)}},d=r("IySD"),f=r("AvfC");t.a=[Object(f.a)("GeoLocationSource","geoLocation"),Object(f.a)(d.a.DocId,"id"),Object(f.a)(d.a.Title,"title"),Object(f.a)(d.a.DocId,"indexId"),Object(f.a)(d.a.WebId,"webId"),Object(f.a)(d.a.SiteId,"siteId"),Object(f.a)(d.a.UniqueId,"uniqueId"),Object(f.a)([d.a.Path,d.a.ServerRedirectedUrl,d.a.DefaultEncodingURL,d.a.FileExtension,d.a.SecondaryFileExtension,d.a.UniqueId,d.a.SiteId,d.a.ContentTypeId,d.a.ContentClass,d.a.SPWebUrl],"url",function(e){if(Boolean(e)){var t={fileExtension:Object(n.a)(e[4])?e[3]:e[4],path:e[0],serverRedirectedUrl:e[1],defaultEncodingUrl:e[2],videoId:i.a.RemoveBraces(e[5]),videoChannelId:i.a.RemoveBraces(e[6]),contentTypeId:e[7],contentClass:e[8],sPWebUrl:e[9]};return l.getPath(t)}}),Object(f.a)(d.a.LastModifiedTime,"lastModifiedTime"),Object(f.a)(d.a.ModifiedBy,"lastModifiedBy"),Object(f.a)(d.a.EditorOwsUser,"lastModifiedByAccountName",function(e){return(t=e)&&Object(a.a)(t.split(" "))||"";var t})]},dm60:function(e,t,r){"use strict";r.r(t);var i=r("D57K"),n=r("UlRC"),a=r("rpSO"),c=r("KmCS"),o=r("XgOi"),s=r("aZDo"),u=r.n(s),l=r("mObi"),d=Object(c.regs)("searchux.fileFormatsOpenedInPreviewer",""),f=r("YjUw"),b=Object(l.a)(function(e){var t=[];try{t=e?e.split(",").filter(function(e){return e}).map(function(e){return e.trim().toLocaleLowerCase()}):[]}catch(e){return[]}return t});r("Jvpx");var v=r("313r"),O=r("IySD"),j=r("AvfC"),p=r("kNpJ"),y=r("yMyF"),h=[Object(j.a)(p.a.ActivityItem,Object(y.a)(p.a.Id),function(e){return e.ItemReference.IndexId}),Object(j.a)(p.a.Time,Object(y.a)(O.a.LastModifiedTime)),Object(j.a)(p.a.User,"lastModifiedBy",function(e){return e&&e.Title}),Object(j.a)(p.a.Type,"activityType"),Object(j.a)(p.a.ActivityItem,Object(y.a)(p.a.Url),function(e){return e.Url}),Object(j.a)(p.a.ActivityItem,Object(y.a)(p.a.ServerRedirectedUrl),function(e){return e.ServerRedirectedUrl||""}),Object(j.a)(p.a.ActivityItem,"type",function(){return v.a.ActivitySuggestion}),Object(j.a)(p.a.ActivityItem,Object(y.a)(p.a.Title),function(e){return e.Title}),Object(j.a)(p.a.ActivityItem,"parentSiteUrl",function(e){return e.Site&&e.Site.Url}),Object(j.a)(p.a.ActivityItem,"parentSiteTitle",function(e){return e.Site&&e.Site.Title}),Object(j.a)(p.a.ActivityItem,"fileExtension",function(e){return e.FileExtension}),Object(j.a)(p.a.ActivityItem,"contentClass",function(e){return e.ContentClass}),Object(j.a)(p.a.ActivityItem,"parentLink",function(e){return e.Folder&&e.Folder.Url})],m=r("DHVw"),I=r("/hiP");function g(e){return{scope:e&&e.map(function(e){return e&&e.siteId&&e.siteId.toLowerCase()}).join(",")||""}}var S=Object(I.a)(function(e){var t=e.clientId,r=e.token,n=e.requestDataProvider,a=e.sites,c=n(),o=c.endpoint,s=c.microserviceFlights,u={url:o,method:"POST",headers:Object(i.__assign)(Object(i.__assign)({Accept:"application/json;odata=verbose","Content-Type":"application/json;odata=verbose","SPHome-ClientType":t},r?{Authorization:"Bearer ".concat(r)}:{}),s&&{"SPHome-MicroserviceFlights":s.join(";")}),body:JSON.stringify(a.slice(0,30).map(function(e){return{IndexId:e.id,SiteId:e.siteId,WebId:e.webId,Type:"SiteReference"}}))};return Object(m.a)(u)},{monitorName:"site-activities-rawsprefetch",cacheId:"site-activities-rawsprefetch",cacheVersion:"0",cacheItemLifetime:18e5,cacheKeyExtractor:function(e){return g(e.sites.slice(0,30))}}),U=r("OQP6"),x=function(e,t){return void 0===t&&(t=100),Object(U.a)(S,"Site Activities","activities?count=".concat(t),void 0,e).select(function(e){return JSON.parse(e.xhr.responseText)}).selectMany(function(e){return n.Observable.fromArray(e.Activities)}).propmap(h).toArray().cache("mssearchux-cache-spsites-activitiesprefetch",g(e.slice(0,30)),"0",18e5).selectMany(function(e){return n.Observable.fromArray(e.value)})},A=r("F6lS"),w=r("Xopu"),E="".concat(A.a,".").concat(w.k),T=function(){function e(e,t,r){this.site=e,this.associatedSites=t,this.searchBox=r}return e.prototype.getId=function(){return"SiteActivitiesSuggestionProvider"},e.prototype.createStream=function(e){var t=this;return this.site?x(this.site.isHubSite?this.associatedSites:[this.site],this.site.isHubSite?25:100).where(function(e){return e.serverRedirectedUrl}).specFilter(e,new o.a).select(function(e){var r,n,a=e.serverRedirectedUrl;return r=e.fileExtension,n=d(),(Object(f.b)(r,f.a)||Object(f.b)(r,f.e)||Object(f.b)(r,f.d)||Object(f.b)(r,b(n)))&&(a=function(e){try{var t=new u.a(e);return t.setQueryParameter("web","1"),t.toString()}catch(t){return e}}(a)),Object(i.__assign)(Object(i.__assign)({},e),{onOpen:function(e){0!==e.button||e.ctrlKey||t.searchBox.alwaysActive(!0)},onClose:function(){t.searchBox.alwaysActive(!1),t.searchBox.activate()},serverRedirectedUrl:a})}):n.Observable.empty()},e=Object(i.__decorate)([Object(i.__param)(0,Object(a.a)("site")),Object(i.__param)(1,Object(a.a)("siteAssociation")),Object(i.__param)(2,Object(a.a)("searchBox"))],e)}();t.default=T;Object(c.regs)(E,T)},o2F0:function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r.d(t,"b",function(){return n});var i="0x010100F3754F12A9B6490D9622A01FE9D8F012",n="0x0120D520A808"},sUxJ:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var i=r("r6MD");function n(e,t,r){return function(e,t,r,n,a){var c=t.split(".");return function(t){var o;try{o=Object(i.a)(t,c)}catch(e){throw new Error("Traversing path '"+c.join(".")+"' "+e.message)}var s=[];return o&&(a&&(a.msoilQueryCorrelationId=o.QueryId),s=Object(i.a)(o,e)),function(e,t){Array.isArray(e)||(e=e());try{return function(r){var n=[];return r.forEach(function(r){n.push(function(r){var n={},a=function(e,t,r){for(var i={},n=e.length,a=0;a<n;a++){var c=e[a];i[c[t]]=c[r]}return i}(Object(i.a)(r,t),"Key","Value");return e.forEach(function(e){e(a,n)}),n}(r))}),n}}catch(e){throw new Error("Processing result items"+e.message)}}(r,n)(s)}}("RelevantResults.Table.Rows.results","d.".concat("post"===r?"postquery":"query",".PrimaryQueryResult"),e,"Cells.results",t)}}}]);